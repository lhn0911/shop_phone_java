<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>Danh s√°ch s·∫£n ph·∫©m</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
</head>
<body class="bg-gray-100 p-6">

<div class="max-w-6xl mx-auto bg-white p-6 rounded shadow-md">

  <!-- Hi·ªÉn th·ªã danh s√°ch s·∫£n ph·∫©m -->
  <div th:if="${page == 'product'}">
    <!-- Header -->
    <div class="flex justify-between items-center mb-6">
      <h1 class="text-2xl font-bold text-gray-800">üì± Danh s√°ch s·∫£n ph·∫©m</h1>
      <a th:href="@{/products/add}" class="bg-orange-500 text-white px-4 py-2 rounded hover:bg-orange-600">
        ‚ûï Th√™m s·∫£n ph·∫©m
      </a>
    </div>

    <!-- Search -->
    <div class="mb-4">
      <input type="text" placeholder="üîç T√¨m ki·∫øm s·∫£n ph·∫©m..."
             class="w-1/3 px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-orange-300">
    </div>

    <!-- Product Table -->
    <table class="w-full bg-white border border-gray-200 rounded shadow-sm">
      <thead class="bg-gray-100 text-sm font-medium text-gray-700">
      <tr>
        <th class="py-3 px-4 border-b">STT</th>
        <th class="py-3 px-4 border-b">T√™n s·∫£n ph·∫©m</th>
        <th class="py-3 px-4 border-b">Th∆∞∆°ng hi·ªáu</th>
        <th class="py-3 px-4 border-b text-right">Gi√°</th>
        <th class="py-3 px-4 border-b text-center">T·ªìn kho</th>
        <th class="py-3 px-4 border-b text-center">Thao t√°c</th>
      </tr>
      </thead>
      <tbody>
      <tr th:each="product, iterStat : ${products}" class="text-sm hover:bg-gray-50">
        <td class="py-2 px-4 border-b" th:text="${(currentPage - 1) * 5 + iterStat.index + 1}">1</td>
        <td class="py-2 px-4 border-b" th:text="${product.name}">iPhone 15</td>
        <td class="py-2 px-4 border-b" th:text="${product.brand}">Apple</td>
        <td class="py-2 px-4 border-b text-right"
            th:text="${#numbers.formatDecimal(product.price, 0, 'COMMA', 2, 'POINT')} + ' ƒë'">20,000,000 ƒë</td>
        <td class="py-2 px-4 border-b text-center" th:text="${product.stock}">10</td>
        <td class="py-2 px-4 border-b text-center">
          <a th:href="@{'/products/edit/' + ${product.id}}" class="text-blue-500 hover:underline mr-2">‚úèÔ∏è S·ª≠a</a>
          <a th:href="@{'/products/delete/' + ${product.id}}" class="text-red-500 hover:underline">üóëÔ∏è X√≥a</a>
        </td>
      </tr>
      </tbody>
    </table>

    <!-- Pagination -->
    <div class="mt-6 flex justify-center space-x-1">
      <a th:if="${currentPage > 1}" th:href="@{'/products?page=' + (${currentPage - 1})}"
         class="px-3 py-1 border rounded hover:bg-gray-200 text-gray-600">&laquo;</a>

      <a th:each="i : ${#numbers.sequence(1, totalPages)}"
         th:href="@{'/products?page=' + ${i}}"
         th:text="${i}"
         th:class="${i == currentPage} ? 'px-3 py-1 border rounded bg-orange-500 text-white' : 'px-3 py-1 border rounded bg-white text-gray-700 hover:bg-gray-200'">
      </a>

      <a th:if="${currentPage < totalPages}" th:href="@{'/products?page=' + (${currentPage + 1})}"
         class="px-3 py-1 border rounded hover:bg-gray-200 text-gray-600">&raquo;</a>
    </div>
  </div>

  <!-- Form Th√™m s·∫£n ph·∫©m -->
  <div th:if="${page == 'addProduct'}">
    <h2 class="text-xl font-semibold mb-4">‚ûï Th√™m s·∫£n ph·∫©m m·ªõi</h2>

    <form th:action="@{/products/add}" method="post" th:object="${productDTO}" class="space-y-4">
      <div>
        <label class="block mb-1">T√™n s·∫£n ph·∫©m</label>
        <input th:field="*{name}" type="text" required class="w-full border px-3 py-2 rounded" placeholder="Nh·∫≠p t√™n s·∫£n ph·∫©m">
        <div th:if="${#fields.hasErrors('name')}" class="text-red-500 text-sm" th:errors="*{name}"></div>
      </div>

      <div>
        <label class="block mb-1">Th∆∞∆°ng hi·ªáu</label>
        <input th:field="*{brand}" type="text" required class="w-full border px-3 py-2 rounded" placeholder="Nh·∫≠p th∆∞∆°ng hi·ªáu">
        <div th:if="${#fields.hasErrors('brand')}" class="text-red-500 text-sm" th:errors="*{brand}"></div>
      </div>

      <div>
        <label class="block mb-1">Gi√°</label>
        <input th:field="*{price}" type="number" required class="w-full border px-3 py-2 rounded" placeholder="Nh·∫≠p gi√° s·∫£n ph·∫©m">
        <div th:if="${#fields.hasErrors('price')}" class="text-red-500 text-sm" th:errors="*{price}"></div>
      </div>

      <div>
        <label class="block mb-1">T·ªìn kho</label>
        <input th:field="*{stock}" type="number" required class="w-full border px-3 py-2 rounded" placeholder="Nh·∫≠p s·ªë l∆∞·ª£ng t·ªìn">
        <div th:if="${#fields.hasErrors('stock')}" class="text-red-500 text-sm" th:errors="*{stock}"></div>
      </div>

      <div>
        <label class="block mb-1">URL h√¨nh ·∫£nh</label>
        <input th:field="*{image}" type="text" required class="w-full border px-3 py-2 rounded" placeholder="Nh·∫≠p link ·∫£nh (URL)">
        <div th:if="${#fields.hasErrors('image')}" class="text-red-500 text-sm" th:errors="*{image}"></div>
      </div>

      <div class="flex justify-end space-x-2">
        <a th:href="@{/products}" class="px-4 py-2 bg-gray-300 rounded hover:bg-gray-400">H·ªßy</a>
        <button type="submit" class="px-4 py-2 bg-orange-500 text-white rounded hover:bg-orange-600">L∆∞u</button>
      </div>
    </form>
  </div>

  <!-- Form S·ª≠a s·∫£n ph·∫©m -->
  <div th:if="${page == 'editProduct'}">
    <h2 class="text-xl font-semibold mb-4">‚úèÔ∏è C·∫≠p nh·∫≠t s·∫£n ph·∫©m</h2>

    <form th:action="@{/products/edit}" method="post" th:object="${productDTO}" class="space-y-4">
      <input type="hidden" th:field="*{id}"/>

      <div>
        <label class="block mb-1">T√™n s·∫£n ph·∫©m</label>
        <input th:field="*{name}" type="text" required class="w-full border px-3 py-2 rounded" placeholder="Nh·∫≠p t√™n s·∫£n ph·∫©m">
        <div th:if="${#fields.hasErrors('name')}" class="text-red-500 text-sm" th:errors="*{name}"></div>
      </div>

      <div>
        <label class="block mb-1">Th∆∞∆°ng hi·ªáu</label>
        <input th:field="*{brand}" type="text" required class="w-full border px-3 py-2 rounded" placeholder="Nh·∫≠p th∆∞∆°ng hi·ªáu">
        <div th:if="${#fields.hasErrors('brand')}" class="text-red-500 text-sm" th:errors="*{brand}"></div>
      </div>

      <div>
        <label class="block mb-1">Gi√°</label>
        <input th:field="*{price}" type="number" required class="w-full border px-3 py-2 rounded" placeholder="Nh·∫≠p gi√° s·∫£n ph·∫©m">
        <div th:if="${#fields.hasErrors('price')}" class="text-red-500 text-sm" th:errors="*{price}"></div>
      </div>

      <div>
        <label class="block mb-1">T·ªìn kho</label>
        <input th:field="*{stock}" type="number" required class="w-full border px-3 py-2 rounded" placeholder="Nh·∫≠p s·ªë l∆∞·ª£ng t·ªìn">
        <div th:if="${#fields.hasErrors('stock')}" class="text-red-500 text-sm" th:errors="*{stock}"></div>
      </div>

      <div>
        <label class="block mb-1">URL h√¨nh ·∫£nh</label>
        <input th:field="*{image}" type="text" required class="w-full border px-3 py-2 rounded" placeholder="Nh·∫≠p link ·∫£nh (URL)">
        <div th:if="${#fields.hasErrors('image')}" class="text-red-500 text-sm" th:errors="*{image}"></div>
      </div>

      <div class="flex justify-end space-x-2">
        <a th:href="@{/products}" class="px-4 py-2 bg-gray-300 rounded hover:bg-gray-400">H·ªßy</a>
        <button type="submit" class="px-4 py-2 bg-orange-500 text-white rounded hover:bg-orange-600">C·∫≠p nh·∫≠t</button>
      </div>
    </form>
  </div>


</div>

</body>
</html>